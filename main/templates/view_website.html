{% extends 'base.html' %}
{% load static %}

{% block title %}{{ website.business_name }} - Generated by Growthzi{% endblock %}

{% block extra_css %}
<style>
    .website-details {
        background-color: #1e293b;
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 30px;
        border-left: 4px solid #6366f1;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }
    
    .website-details h4 {
        color: #a5b4fc;
        font-weight: 700;
        margin-bottom: 15px;
    }
    
    .website-details p {
        margin-bottom: 10px;
        color: #e2e8f0;
    }
    
    .website-details strong {
        color: #f1f5f9;
    }
    
    .website-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 40px 15px;
        background-color: #1e293b;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
        border-radius: 8px;
        margin-bottom: 40px;
        border: 1px solid #334155;
        color: #e2e8f0;
    }
    
    /* Basic styling for common HTML elements that might be in the generated content */
    .website-container h1 {
        font-size: 2.5rem;
        margin-bottom: 1rem;
        color: #f8fafc;
    }
    
    .website-container h2 {
        font-size: 2rem;
        margin-top: 2rem;
        margin-bottom: 1rem;
        color: #f1f5f9;
    }
    
    .website-container h3 {
        font-size: 1.5rem;
        margin-top: 1.5rem;
        margin-bottom: 0.75rem;
        color: #e2e8f0;
    }
    
    .website-container p {
        margin-bottom: 1rem;
        color: #cbd5e1;
    }
    
    .website-container ul, .website-container ol {
        margin-bottom: 1rem;
        padding-left: 2rem;
        color: #cbd5e1;
    }
    
    .website-container li {
        margin-bottom: 0.5rem;
    }
    
    .website-container a {
        color: #a5b4fc;
        text-decoration: none;
    }
    
    .website-container a:hover {
        text-decoration: underline;
        color: #818cf8;
    }
    
    .website-container img {
        max-width: 100%;
        height: auto;
        border-radius: 4px;
        margin: 1rem 0;
    }
    
    .action-buttons {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin: 20px 0;
    }
    
    .action-button {
        padding: 10px 20px;
        font-size: 16px;
        background-color: #6366f1;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        text-decoration: none;
        display: inline-block;
        transition: all 0.3s ease;
    }
    
    .action-button:hover {
        background-color: #4f46e5;
        transform: translateY(-2px);
        color: white;
        box-shadow: 0 6px 15px rgba(99, 102, 241, 0.4);
    }
    
    .action-button.secondary {
        background-color: #475569;
    }
    
    .action-button.secondary:hover {
        background-color: #334155;
    }
    
    .container {
        background-color: #0f172a;
        padding: 30px;
        border-radius: 10px;
        border: 1px solid #1e293b;
    }

    /* Dynamic Website Styles */
    .dynamic-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        background-color: var(--primary-color, #6366f1);
        color: white;
        border-radius: 8px 8px 0 0;
    }

    .dynamic-header .logo {
        font-size: 1.8rem;
        font-weight: bold;
    }

    .dynamic-nav {
        display: flex;
        gap: 20px;
    }

    .dynamic-nav a {
        color: white;
        text-decoration: none;
        padding: 5px 10px;
        border-radius: 5px;
        transition: background-color 0.3s;
    }

    .dynamic-nav a:hover {
        background-color: rgba(255, 255, 255, 0.2);
        color: white;
    }

    .hero-section {
        position: relative;
        padding: 80px 20px;
        text-align: center;
        color: white;
        border-radius: 0;
        background-size: cover;
        background-position: center;
    }

    .hero-section::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.7));
        border-radius: inherit;
    }

    .hero-content {
        position: relative;
        z-index: 1;
    }

    .section {
        padding: 40px 20px;
        margin-bottom: 30px;
    }

    .services-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-top: 30px;
    }

    .service-card {
        background-color: rgba(255, 255, 255, 0.05);
        padding: 25px;
        border-radius: 8px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        transition: transform 0.3s, box-shadow 0.3s;
    }

    .service-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    }

    .testimonials-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-top: 30px;
    }

    .testimonial-card {
        background-color: rgba(255, 255, 255, 0.05);
        padding: 25px;
        border-radius: 8px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        position: relative;
    }

    .testimonial-card::before {
        content: """;
        position: absolute;
        top: 10px;
        left: 10px;
        font-size: 60px;
        color: var(--primary-color, #6366f1);
        opacity: 0.2;
    }

    .contact-section {
        background-color: rgba(255, 255, 255, 0.05);
        padding: 30px;
        border-radius: 8px;
        border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .contact-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        margin-top: 20px;
    }

    .contact-info {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }

    .map-container {
        height: 300px;
        border-radius: 8px;
        overflow: hidden;
    }

    .dynamic-footer {
        margin-top: 50px;
        padding: 40px 20px;
        background-color: var(--secondary-color, #4f46e5);
        color: white;
        border-radius: 0 0 8px 8px;
    }

    .footer-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 30px;
        margin-bottom: 30px;
    }

    .footer-column h3 {
        margin-bottom: 15px;
        font-size: 1.2rem;
        color: white;
    }

    .footer-links {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .footer-links a {
        color: rgba(255, 255, 255, 0.8);
        text-decoration: none;
    }

    .footer-links a:hover {
        color: white;
        text-decoration: underline;
    }

    .social-links {
        display: flex;
        gap: 15px;
        margin-top: 20px;
    }

    .social-links a {
        color: white;
        font-size: 1.2rem;
        transition: transform 0.3s;
    }

    .social-links a:hover {
        transform: translateY(-3px);
    }

    .copyright {
        text-align: center;
        padding-top: 20px;
        border-top: 1px solid rgba(255, 255, 255, 0.2);
        color: rgba(255, 255, 255, 0.7);
    }

    @media (max-width: 768px) {
        .dynamic-header {
            flex-direction: column;
            gap: 15px;
        }
        
        .contact-grid {
            grid-template-columns: 1fr;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="container mt-4 mb-4">
    <div class="row">
        <div class="col-md-12">
            <div class="website-details">
                <h4>Website Details</h4>
                <p><strong>Business Name:</strong> {{ website.business_name }}</p>
                <p><strong>Type:</strong> {{ website.business_type }}</p>
                <p><strong>Industry:</strong> {{ website.industry }}</p>
                <p><strong>Location:</strong> {{ website.location }}</p>
                <p><strong>Date Created:</strong> {{ website.created_at }}</p>
            </div>
            
            <div class="action-buttons">
                <a href="{% url 'details' %}" class="action-button">Generate Another</a>
                <a href="{% url 'home' %}" class="action-button secondary">Back to Home</a>
            </div>
        </div>
    </div>
    
    <div class="website-container mt-4">
        {% if is_mongo %}
            <!-- Display MongoDB website content -->
            <div id="mongo-website-content">
                {% if website_layout %}
                    <!-- Use the website_layout variable directly from the context -->
                    {% with content=website_layout %}
                        {% if content.pages %}
                            <!-- Apply theme colors as CSS variables -->
                            <style>
                                :root {
                                    --primary-color: {{ content.theme.primary_color|default:"#6366f1" }};
                                    --secondary-color: {{ content.theme.secondary_color|default:"#4f46e5" }};
                                    --text-color: {{ content.theme.text_color|default:"#f8fafc" }};
                                    --background-color: {{ content.theme.background_color|default:"#0f172a" }};
                                    --accent-color: {{ content.theme.accent_color|default:"#a5b4fc" }};
                                }
                            </style>
                            
                            <!-- Header -->
                            {% if content.header %}
                            <header class="dynamic-header">
                                <div class="logo">{{ content.header.logo_text }}</div>
                                <nav class="dynamic-nav">
                                    {% for item in content.header.navigation %}
                                        <a href="{{ item.link }}">{{ item.text }}</a>
                                    {% endfor %}
                                </nav>
                            </header>
                            {% endif %}
                            
                            <!-- Page Content -->
                            {% for page in content.pages %}
                                {% if page.name == "Home" %}
                                    {% for section in page.sections %}
                                        {% if section.type == "hero" %}
                                            <section class="hero-section" id="{{ section.id }}" style="background-image: url('{{ section.background_image }}');">
                                                <div class="hero-content">
                                                    <h1>{{ section.title }}</h1>
                                                    <p style="font-size: 1.2rem; margin-bottom: 30px;">{{ section.subtitle }}</p>
                                                    {% if section.cta %}
                                                    <a href="{{ section.cta.link }}" style="display: inline-block; background-color: var(--primary-color); color: white; padding: 12px 30px; border-radius: 5px; text-decoration: none; font-weight: bold; border: 2px solid transparent; transition: all 0.3s;">{{ section.cta.text }}</a>
                                                    {% endif %}
                                                </div>
                                            </section>
                                        {% elif section.type == "about" %}
                                            <section class="section" id="{{ section.id }}">
                                                <h2>{{ section.title }}</h2>
                                                <div style="display: flex; flex-wrap: wrap; gap: 30px; align-items: center; margin-top: 20px;">
                                                    <div style="flex: 1; min-width: 300px;">
                                                        <p style="line-height: 1.6;">{{ section.content }}</p>
                                                    </div>
                                                    {% if section.image %}
                                                    <div style="flex: 1; min-width: 300px;">
                                                        <img src="{{ section.image }}" alt="{{ section.title }}" style="width: 100%; border-radius: 8px; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);">
                                                    </div>
                                                    {% endif %}
                                                </div>
                                            </section>
                                        {% elif section.type == "services" %}
                                            <section class="section" id="{{ section.id }}">
                                                <h2>{{ section.title }}</h2>
                                                <div class="services-grid">
                                                    {% for service in section.items %}
                                                        <div class="service-card">
                                                            <h3 style="color: var(--primary-color); margin-bottom: 15px;">{{ service.title }}</h3>
                                                            <p>{{ service.description }}</p>
                                                        </div>
                                                    {% endfor %}
                                                </div>
                                            </section>
                                        {% elif section.type == "testimonials" %}
                                            <section class="section" id="{{ section.id }}">
                                                <h2>{{ section.title }}</h2>
                                                <div class="testimonials-grid">
                                                    {% for testimonial in section.items %}
                                                        <div class="testimonial-card">
                                                            <p style="font-style: italic; margin-bottom: 20px;">"{{ testimonial.quote }}"</p>
                                                            <div>
                                                                <p style="font-weight: bold; margin-bottom: 5px;">{{ testimonial.author }}</p>
                                                                <p style="color: var(--accent-color);">{{ testimonial.position }}</p>
                                                            </div>
                                                        </div>
                                                    {% endfor %}
                                                </div>
                                            </section>
                                        {% elif section.type == "contact" %}
                                            <section class="section contact-section" id="{{ section.id }}">
                                                <h2>{{ section.title }}</h2>
                                                <div class="contact-grid">
                                                    <div class="contact-info">
                                                        <p><strong>Address:</strong> {{ section.address }}</p>
                                                        <p><strong>Email:</strong> {{ section.email }}</p>
                                                        <p><strong>Phone:</strong> {{ section.phone }}</p>
                                                        
                                                        <form style="margin-top: 20px;">
                                                            <div style="margin-bottom: 15px;">
                                                                <input type="text" placeholder="Your Name" style="width: 100%; padding: 10px; background-color: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 5px; color: white;">
                                                            </div>
                                                            <div style="margin-bottom: 15px;">
                                                                <input type="email" placeholder="Your Email" style="width: 100%; padding: 10px; background-color: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 5px; color: white;">
                                                            </div>
                                                            <div style="margin-bottom: 15px;">
                                                                <textarea placeholder="Your Message" rows="4" style="width: 100%; padding: 10px; background-color: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 5px; color: white;"></textarea>
                                                            </div>
                                                            <button type="button" style="background-color: var(--primary-color); color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">Send Message</button>
                                                        </form>
                                                    </div>
                                                    
                                                    {% if section.map_embed %}
                                                    <div class="map-container">
                                                        <iframe src="{{ section.map_embed }}" width="100%" height="100%" frameborder="0" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
                                                    </div>
                                                    {% endif %}
                                                </div>
                                            </section>
                                        {% endif %}
                                    {% endfor %}
                                {% endif %}
                            {% endfor %}
                            
                            <!-- Footer -->
                            {% if content.footer %}
                            <footer class="dynamic-footer">
                                <div class="footer-grid">
                                    {% for column in content.footer.columns %}
                                        <div class="footer-column">
                                            <h3>{{ column.title }}</h3>
                                            {% if column.links %}
                                                <div class="footer-links">
                                                    {% for link in column.links %}
                                                        <a href="{{ link.link }}">{{ link.text }}</a>
                                                    {% endfor %}
                                                </div>
                                            {% endif %}
                                            {% if column.content %}
                                                <div class="footer-content">
                                                    {{ column.content|safe }}
                                                </div>
                                            {% endif %}
                                        </div>
                                    {% endfor %}
                                </div>
                                
                                {% if content.footer.social_links %}
                                <div class="social-links" style="justify-content: center;">
                                    {% for social in content.footer.social_links %}
                                        <a href="{{ social.link }}" title="{{ social.platform }}">
                                            <i class="{{ social.icon }}"></i>
                                        </a>
                                    {% endfor %}
                                </div>
                                {% endif %}
                                
                                <div class="copyright">
                                    {{ content.footer.copyright }}
                                </div>
                            </footer>
                            {% endif %}
                        {% else %}
                            <!-- Fallback if content structure is different -->
                            <pre style="background-color: #2d3748; padding: 20px; border-radius: 8px; overflow: auto; color: #e2e8f0;">{{ content|pprint }}</pre>
                        {% endif %}
                    {% endwith %}
                {% else %}
                    <p>No content available for this website.</p>
                {% endif %}
            </div>
        {% else %}
            <!-- Display regular website content -->
            {{ website.content|safe }}
        {% endif %}
    </div>
</div>
{% endblock %}